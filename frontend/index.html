<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Yalanamchou</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --black:#000;--white:#fff;--g50:#F7F7F7;--g100:#F0F0F0;--g200:#E0E0E0;
  --g300:#C8C8C8;--g400:#9E9E9E;--g600:#5E5E5E;--g800:#2A2A2A;
  --red:#E8294A;--green:#16A34A;--yellow:#F5A623;--blue:#2563EB;
  --font:'Plus Jakarta Sans',sans-serif;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%;font-family:var(--font);background:var(--black);overflow:hidden;-webkit-font-smoothing:antialiased}

/* â”€â”€ SCREENS â”€â”€ */
.sc{position:fixed;inset:0;display:none;flex-direction:column}
.sc.on{display:flex}

/* â”€â”€ SPLASH â”€â”€ */
#splash{background:var(--black);align-items:center;justify-content:center}
.sp-logo{font-size:72px;animation:pop .7s cubic-bezier(.34,1.56,.64,1) both}
.sp-name{font-size:38px;font-weight:900;color:var(--white);letter-spacing:-1.5px;margin-top:16px}
.sp-tag{font-size:14px;color:var(--g400);margin-top:6px}
.sp-bar{width:48px;height:3px;background:rgba(255,255,255,.1);border-radius:2px;margin-top:48px;overflow:hidden}
.sp-fill{height:100%;background:var(--white);border-radius:2px;animation:bar 2.6s ease forwards}
@keyframes pop{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes bar{from{width:0}to{width:100%}}
@keyframes up{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
@keyframes slide{from{transform:translateY(100%)}to{transform:translateY(0)}}

/* â”€â”€ LOGIN â”€â”€ */
#login{background:var(--black);justify-content:flex-end}
.login-top{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px}
.login-top .emoji{font-size:56px;margin-bottom:16px}
.login-title{font-size:32px;font-weight:900;color:var(--white);letter-spacing:-1px;text-align:center}
.login-sub{font-size:14px;color:var(--g400);text-align:center;margin-top:8px}
.card{background:var(--white);border-radius:24px 24px 0 0;padding:28px 22px 40px;animation:slide .4s cubic-bezier(.32,.72,0,1) both}
.card-title{font-size:22px;font-weight:900;letter-spacing:-.5px;margin-bottom:4px}
.card-sub{font-size:13px;color:var(--g400);margin-bottom:22px}
.ph-row{display:flex;gap:10px;margin-bottom:14px}
.ph-code{display:flex;align-items:center;gap:6px;padding:0 14px;height:54px;background:var(--g50);border:1.5px solid var(--g200);border-radius:14px;font-size:15px;font-weight:700;flex-shrink:0}
.ph-inp{flex:1;height:54px;background:var(--g50);border:1.5px solid var(--g200);border-radius:14px;padding:0 16px;font-family:var(--font);font-size:17px;font-weight:600;outline:none;transition:border-color .2s}
.ph-inp:focus{border-color:var(--black);background:var(--white)}
.btn{width:100%;height:54px;border:none;border-radius:14px;font-family:var(--font);font-size:16px;font-weight:800;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px;letter-spacing:-.3px}
.btn:active{transform:scale(.97)}
.btn-black{background:var(--black);color:var(--white)}
.btn-green{background:var(--green);color:var(--white)}
.btn-red{background:var(--red);color:var(--white)}
.btn-outline{background:transparent;border:2px solid var(--g200);color:var(--black)}
.btn-gray{background:var(--g100);color:var(--black)}
.otp-grid{display:flex;gap:8px;margin-bottom:20px}
.otp-b{flex:1;height:60px;text-align:center;font-size:26px;font-weight:800;background:var(--g50);border:2px solid var(--g200);border-radius:14px;font-family:var(--font);outline:none;transition:all .15s;caret-color:var(--green)}
.otp-b:focus{border-color:var(--black);background:var(--white);transform:scale(1.04)}
.otp-b.ok{border-color:var(--black)}
.terms{font-size:11px;color:var(--g400);text-align:center;margin-top:14px;line-height:1.6}
.resend{text-align:center;margin-top:12px;font-size:13px;font-weight:700;color:var(--black);cursor:pointer;text-decoration:underline}

/* â”€â”€ HOME â”€â”€ */
#home{background:var(--g50)}
.home-header{background:var(--white);padding:52px 20px 16px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.home-greeting{font-size:12px;color:var(--g400);font-weight:500}
.home-name{font-size:20px;font-weight:900;letter-spacing:-.5px;margin-top:1px}
.home-header-right{display:flex;align-items:center;gap:10px}
.hdr-btn{width:40px;height:40px;border-radius:50%;background:var(--g100);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;position:relative}
.notif-dot{position:absolute;top:4px;right:4px;width:8px;height:8px;border-radius:50%;background:var(--red);border:2px solid var(--white)}
.where-card{margin:14px 16px;background:var(--white);border-radius:18px;padding:14px 16px;display:flex;align-items:center;gap:12px;box-shadow:0 2px 12px rgba(0,0,0,.06);cursor:pointer;transition:all .2s}
.where-card:active{transform:scale(.99)}
.where-icon{width:40px;height:40px;border-radius:12px;background:var(--black);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.where-text{font-size:16px;font-weight:700;letter-spacing:-.2px}
.where-sub{font-size:12px;color:var(--g400);margin-top:2px}
.home-scroll{flex:1;overflow-y:auto;padding:0 16px 100px}
.home-scroll::-webkit-scrollbar{display:none}
/* Wallet card */
.wallet-card{background:var(--black);border-radius:18px;padding:18px;margin-bottom:14px;display:flex;align-items:center;justify-content:space-between}
.wallet-left .wl-lbl{font-size:11px;color:rgba(255,255,255,.5);font-weight:600;text-transform:uppercase;letter-spacing:.8px}
.wallet-left .wl-amt{font-size:28px;font-weight:900;color:var(--white);letter-spacing:-1px;margin-top:4px}
.wallet-left .wl-sub{font-size:12px;color:rgba(255,255,255,.4);margin-top:4px}
.wallet-right{display:flex;flex-direction:column;gap:8px;align-items:flex-end}
.wallet-badge{background:rgba(255,255,255,.1);border-radius:10px;padding:6px 12px;font-size:12px;font-weight:700;color:rgba(255,255,255,.7);cursor:pointer;transition:all .2s}
.wallet-badge:active{background:rgba(255,255,255,.15)}
/* Promo banner */
.promo-banner{background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:18px;padding:16px;margin-bottom:14px;display:flex;align-items:center;gap:14px;cursor:pointer}
.promo-ico{font-size:32px}
.promo-tag{background:var(--yellow);color:var(--black);font-size:10px;font-weight:900;padding:2px 8px;border-radius:4px;letter-spacing:.5px;margin-bottom:6px;display:inline-block}
.promo-title{font-size:15px;font-weight:800;color:var(--white);letter-spacing:-.3px}
.promo-sub{font-size:12px;color:rgba(255,255,255,.5);margin-top:2px}
/* Section */
.sec-hd{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.sec-title{font-size:15px;font-weight:800;letter-spacing:-.3px}
.sec-link{font-size:13px;font-weight:700;color:var(--g400);cursor:pointer}
/* Quick destinations */
.dest-row{display:flex;gap:10px;overflow-x:auto;padding-bottom:4px;margin-bottom:14px}
.dest-row::-webkit-scrollbar{display:none}
.dest-chip{flex-shrink:0;background:var(--white);border-radius:50px;padding:8px 16px;display:flex;align-items:center;gap:8px;cursor:pointer;transition:all .2s;box-shadow:0 1px 6px rgba(0,0,0,.05)}
.dest-chip:active{background:var(--g100)}
.dest-chip-ico{font-size:16px}
.dest-chip-name{font-size:13px;font-weight:700;white-space:nowrap}
/* Recent rides */
.ride-item{background:var(--white);border-radius:16px;padding:14px;margin-bottom:10px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:all .2s}
.ride-item:active{background:var(--g50)}
.ride-ico{width:42px;height:42px;border-radius:12px;background:var(--g100);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.ride-dest{font-size:14px;font-weight:700;letter-spacing:-.2px}
.ride-meta{font-size:12px;color:var(--g400);margin-top:2px}
.ride-price{font-size:15px;font-weight:900;margin-left:auto;letter-spacing:-.3px}
/* Bottom nav */
.bnav{position:fixed;bottom:0;left:0;right:0;height:70px;background:var(--white);border-top:1px solid var(--g100);display:flex;align-items:center;z-index:200}
.bnav-i{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer;padding:8px 0;transition:all .2s}
.bnav-i:active{transform:scale(.9)}
.bnav-ico{font-size:22px}
.bnav-lbl{font-size:10px;font-weight:700;color:var(--g400);letter-spacing:.3px}
.bnav-i.on .bnav-lbl{color:var(--black)}
.bnav-i.on .bnav-ico{filter:none}

/* â”€â”€ BOOKING â”€â”€ */
#booking{background:var(--white)}
.booking-header{padding:52px 20px 14px;display:flex;align-items:center;gap:14px;flex-shrink:0;border-bottom:1px solid var(--g100)}
.back-btn{width:40px;height:40px;border-radius:50%;background:var(--g100);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.route-inputs{flex:1;display:flex;flex-direction:column;gap:8px}
.route-inp-row{display:flex;align-items:center;gap:10px}
.route-pip{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.route-pip.a{background:var(--black)}
.route-pip.b{background:var(--red)}
.route-line{width:1px;height:16px;background:var(--g200);margin-left:4px}
.route-inp{flex:1;border:none;outline:none;font-family:var(--font);font-size:15px;font-weight:600;color:var(--black);background:var(--g50);border-radius:10px;padding:10px 14px}
.route-inp::placeholder{color:var(--g300);font-weight:500}
/* Price estimate bar */
.price-est{margin:14px 20px;background:var(--g50);border-radius:14px;padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
.pe-label{font-size:13px;color:var(--g400);font-weight:600}
.pe-price{font-size:20px;font-weight:900;letter-spacing:-.5px;color:var(--black)}
.pe-dist{font-size:12px;color:var(--g400);margin-top:2px;text-align:right}
/* Suggestions */
.suggestions{flex:1;overflow-y:auto;padding:0 20px}
.suggestions::-webkit-scrollbar{display:none}
.sug-item{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid var(--g100);cursor:pointer;transition:background .15s}
.sug-item:last-child{border-bottom:none}
.sug-ico{width:40px;height:40px;border-radius:12px;background:var(--g100);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.sug-name{font-size:14px;font-weight:700;letter-spacing:-.2px}
.sug-addr{font-size:12px;color:var(--g400);margin-top:2px}
.sug-dist{font-size:12px;font-weight:700;color:var(--g400);margin-left:auto;flex-shrink:0}
/* Promo input */
.promo-inp-row{margin:0 20px 14px;display:flex;gap:8px}
.promo-inp{flex:1;height:46px;background:var(--g50);border:1.5px solid var(--g200);border-radius:12px;padding:0 14px;font-family:var(--font);font-size:14px;font-weight:600;outline:none;transition:border-color .2s}
.promo-inp:focus{border-color:var(--black)}
.promo-apply{height:46px;padding:0 18px;background:var(--black);color:var(--white);border:none;border-radius:12px;font-family:var(--font);font-size:14px;font-weight:800;cursor:pointer}

/* â”€â”€ VEHICLES â”€â”€ */
#vehicles{background:var(--white)}
.map-preview{height:220px;background:#0a0f1e;position:relative;overflow:hidden;flex-shrink:0}
.map-preview canvas{width:100%;height:100%;display:block}
.map-overlay-dest{position:absolute;bottom:12px;left:12px;right:12px;background:rgba(0,0,0,.7);backdrop-filter:blur(10px);border-radius:12px;padding:10px 14px;display:flex;align-items:center;gap:10px}
.mod-dest{font-size:13px;font-weight:700;color:var(--white);flex:1}
.mod-dist{font-size:12px;color:rgba(255,255,255,.5)}
.vehicles-list{flex:1;overflow-y:auto;padding:14px 16px}
.vehicles-list::-webkit-scrollbar{display:none}
.vehicle-card{border:2px solid var(--g200);border-radius:18px;padding:14px 16px;margin-bottom:10px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:14px}
.vehicle-card:active{transform:scale(.99)}
.vehicle-card.on{border-color:var(--black);background:var(--black)}
.vehicle-card.on .vc-name,.vehicle-card.on .vc-desc,.vehicle-card.on .vc-price,.vehicle-card.on .vc-eta{color:var(--white)}
.vc-ico{font-size:32px;flex-shrink:0}
.vc-name{font-size:16px;font-weight:800;letter-spacing:-.3px;transition:color .2s}
.vc-desc{font-size:12px;color:var(--g400);margin-top:2px;transition:color .2s}
.vc-eta{font-size:12px;font-weight:700;color:var(--g400);margin-top:4px;transition:color .2s}
.vc-price{font-size:20px;font-weight:900;letter-spacing:-.5px;margin-left:auto;flex-shrink:0;transition:color .2s}
.veh-bottom{padding:14px 16px 32px;background:var(--white);border-top:1px solid var(--g100);flex-shrink:0}
.veh-confirm-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.veh-total-lbl{font-size:13px;color:var(--g400);font-weight:600}
.veh-total{font-size:24px;font-weight:900;letter-spacing:-1px}

/* â”€â”€ TRACKING â”€â”€ */
#tracking{background:var(--g50)}
.track-map{height:42vh;background:#0a0f1e;position:relative;overflow:hidden;flex-shrink:0}
.track-map canvas{width:100%;height:100%;display:block}
.track-sheet{flex:1;background:var(--white);border-radius:24px 24px 0 0;margin-top:-24px;padding:20px 20px 0;overflow-y:auto;position:relative;z-index:10}
.track-sheet::-webkit-scrollbar{display:none}
.status-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(22,163,74,.1);border-radius:20px;padding:6px 14px;margin-bottom:14px}
.status-pip{width:7px;height:7px;border-radius:50%;background:var(--green);animation:pulse 1.5s ease infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}
.status-txt{font-size:13px;font-weight:700;color:var(--green)}
.track-title{font-size:22px;font-weight:900;letter-spacing:-.5px;margin-bottom:4px}
.track-sub{font-size:13px;color:var(--g400);margin-bottom:16px}
.eta-row{display:flex;gap:10px;margin-bottom:16px}
.eta-box{flex:1;background:var(--g50);border-radius:14px;padding:12px;text-align:center}
.eta-val{font-size:22px;font-weight:900;letter-spacing:-.5px}
.eta-lbl{font-size:11px;color:var(--g400);font-weight:600;margin-top:2px}
.prog-track{height:5px;background:var(--g200);border-radius:3px;margin-bottom:16px;overflow:hidden}
.prog-fill{height:100%;background:var(--black);border-radius:3px;transition:width .5s ease;width:0%}
/* Driver card */
.driver-card{background:var(--g50);border-radius:18px;padding:14px;margin-bottom:14px;display:flex;align-items:center;gap:12px}
.drv-ava{width:52px;height:52px;border-radius:50%;background:var(--g200);display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}
.drv-name{font-size:16px;font-weight:800;letter-spacing:-.3px}
.drv-car{font-size:13px;color:var(--g400);margin-top:2px}
.drv-rating{font-size:13px;font-weight:700;margin-top:3px}
.drv-plate{background:var(--yellow);color:var(--black);font-size:12px;font-weight:900;padding:3px 10px;border-radius:6px;margin-left:auto;letter-spacing:.5px}
.action-row{display:flex;gap:10px;margin-bottom:14px}
.act-btn{flex:1;height:48px;border-radius:14px;font-family:var(--font);font-size:14px;font-weight:700;cursor:pointer;border:none;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px}
.act-btn:active{transform:scale(.96)}
.act-btn.black{background:var(--black);color:var(--white)}
.act-btn.outline{background:var(--g50);color:var(--black);border:1.5px solid var(--g200)}
.act-btn.red{background:var(--red);color:var(--white)}
.act-btn.blue{background:var(--blue);color:var(--white)}
/* SOS button */
.sos-btn{width:100%;height:50px;border-radius:14px;background:rgba(232,41,74,.1);border:2px solid rgba(232,41,74,.3);color:var(--red);font-family:var(--font);font-size:15px;font-weight:800;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:14px;transition:all .2s}
.sos-btn:active{background:rgba(232,41,74,.2)}

/* â”€â”€ CHAT â”€â”€ */
#chat{background:var(--white)}
.chat-header{padding:52px 20px 14px;display:flex;align-items:center;gap:14px;border-bottom:1px solid var(--g100);flex-shrink:0}
.chat-drv-info{flex:1}
.chat-drv-name{font-size:16px;font-weight:800;letter-spacing:-.3px}
.chat-drv-status{font-size:12px;color:var(--green);font-weight:600;margin-top:2px}
.chat-messages{flex:1;overflow-y:auto;padding:16px 20px;display:flex;flex-direction:column;gap:10px}
.chat-messages::-webkit-scrollbar{display:none}
.msg{max-width:75%;padding:10px 14px;border-radius:18px;font-size:14px;font-weight:500;line-height:1.5}
.msg.me{background:var(--black);color:var(--white);border-radius:18px 18px 4px 18px;align-self:flex-end}
.msg.them{background:var(--g100);color:var(--black);border-radius:18px 18px 18px 4px;align-self:flex-start}
.msg-time{font-size:10px;color:rgba(255,255,255,.4);margin-top:4px;text-align:right}
.msg.them .msg-time{color:var(--g400);text-align:left}
.chat-input-row{padding:12px 20px 32px;border-top:1px solid var(--g100);display:flex;gap:10px;flex-shrink:0}
.chat-inp{flex:1;height:46px;background:var(--g100);border:none;border-radius:24px;padding:0 18px;font-family:var(--font);font-size:14px;outline:none;color:var(--black)}
.chat-send{width:46px;height:46px;border-radius:50%;background:var(--black);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
/* Quick replies */
.quick-replies{display:flex;gap:8px;padding:8px 20px;overflow-x:auto}
.quick-replies::-webkit-scrollbar{display:none}
.qr{flex-shrink:0;padding:7px 14px;background:var(--g100);border-radius:20px;font-size:12px;font-weight:700;cursor:pointer;border:none;font-family:var(--font);transition:all .15s}
.qr:active{background:var(--g200)}

/* â”€â”€ ARRIVED â”€â”€ */
#arrived{background:var(--white);align-items:center;justify-content:center;padding:32px 24px 48px}
.arr-emoji{font-size:72px;margin-bottom:20px;animation:pop .5s cubic-bezier(.34,1.56,.64,1) both}
.arr-title{font-size:28px;font-weight:900;letter-spacing:-1px;margin-bottom:6px;text-align:center}
.arr-sub{font-size:14px;color:var(--g400);text-align:center;margin-bottom:24px}
.price-card{background:var(--black);border-radius:20px;padding:22px;width:100%;margin-bottom:20px}
.price-big{font-size:52px;font-weight:900;letter-spacing:-2px;color:var(--white);line-height:1;text-align:center}
.price-lbl{font-size:13px;color:rgba(255,255,255,.4);text-align:center;margin-top:6px}
.breakdown{display:flex;justify-content:space-between;margin-top:16px;padding-top:16px;border-top:1px solid rgba(255,255,255,.1)}
.bd-item{text-align:center}
.bd-val{font-size:14px;font-weight:800;color:var(--white)}
.bd-lbl{font-size:10px;color:rgba(255,255,255,.4);margin-top:3px}
/* Rating */
.rating-row{display:flex;gap:10px;margin-bottom:20px;justify-content:center}
.star{font-size:38px;cursor:pointer;transition:transform .15s;filter:grayscale(1)}
.star.on{filter:none;transform:scale(1.15)}
/* Payment methods */
.pay-methods{display:flex;gap:10px;width:100%;margin-bottom:16px}
.pay-btn{flex:1;height:50px;border-radius:14px;border:2px solid var(--g200);background:transparent;font-family:var(--font);font-size:13px;font-weight:700;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px}
.pay-btn.on{border-color:var(--black);background:var(--black);color:var(--white)}

/* â”€â”€ HISTORY â”€â”€ */
#history{background:var(--g50)}
.hist-header{background:var(--white);padding:52px 20px 16px;border-bottom:1px solid var(--g100);flex-shrink:0}
.hist-title{font-size:24px;font-weight:900;letter-spacing:-.5px;margin-bottom:14px}
.hist-stats{display:flex;gap:12px}
.hist-stat{flex:1;background:var(--g50);border-radius:14px;padding:12px;text-align:center}
.hist-stat-val{font-size:20px;font-weight:900;letter-spacing:-.5px}
.hist-stat-lbl{font-size:11px;color:var(--g400);font-weight:600;margin-top:2px}
.hist-list{flex:1;overflow-y:auto;padding:14px 16px 90px}
.hist-list::-webkit-scrollbar{display:none}
.hist-item{background:var(--white);border-radius:16px;padding:14px;margin-bottom:10px;display:flex;align-items:center;gap:12px;cursor:pointer}
.hist-ico{width:44px;height:44px;border-radius:12px;background:var(--g100);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
.hist-dest{font-size:14px;font-weight:700;letter-spacing:-.2px}
.hist-meta{font-size:12px;color:var(--g400);margin-top:2px}
.hist-right{margin-left:auto;text-align:right}
.hist-price{font-size:15px;font-weight:900}
.hist-status{font-size:11px;font-weight:700;margin-top:2px}
.hist-status.ok{color:var(--green)}
.hist-status.ko{color:var(--red)}

/* â”€â”€ PROFILE â”€â”€ */
#profile{background:var(--g50);overflow-y:auto}
.prof-header{background:var(--black);padding:52px 24px 28px;display:flex;flex-direction:column;align-items:center}
.prof-ava{width:80px;height:80px;border-radius:50%;background:var(--g200);display:flex;align-items:center;justify-content:center;font-size:36px;font-weight:900;color:var(--black);margin-bottom:14px}
.prof-name{font-size:22px;font-weight:900;color:var(--white);letter-spacing:-.5px}
.prof-phone{font-size:14px;color:rgba(255,255,255,.4);margin-top:4px}
.prof-verify{display:flex;align-items:center;gap:6px;background:rgba(22,163,74,.15);border-radius:20px;padding:5px 14px;margin-top:12px}
.prof-verify-txt{font-size:12px;font-weight:700;color:var(--green)}
.prof-stats{display:flex;gap:0;margin:14px 16px;background:var(--white);border-radius:18px;overflow:hidden}
.ps-item{flex:1;padding:14px;text-align:center;border-right:1px solid var(--g100)}
.ps-item:last-child{border-right:none}
.ps-val{font-size:20px;font-weight:900;letter-spacing:-.5px}
.ps-lbl{font-size:11px;color:var(--g400);font-weight:600;margin-top:2px}
.menu-section{margin:0 16px 14px}
.menu-lbl{font-size:11px;font-weight:700;color:var(--g400);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;padding:0 4px}
.menu-item{display:flex;align-items:center;gap:14px;background:var(--white);border-radius:14px;padding:14px;margin-bottom:6px;cursor:pointer;transition:all .2s}
.menu-item:active{background:var(--g50)}
.mi-ico{font-size:20px;width:28px;text-align:center;flex-shrink:0}
.mi-txt{font-size:15px;font-weight:600;flex:1;letter-spacing:-.2px}
.mi-chev{font-size:16px;color:var(--g300)}
.mi-badge{background:var(--red);color:white;font-size:10px;font-weight:800;padding:2px 7px;border-radius:20px}
.menu-item.danger .mi-txt{color:var(--red)}

/* â”€â”€ SOS MODAL â”€â”€ */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1000;display:none;align-items:flex-end;justify-content:center}
.modal-overlay.on{display:flex}
.modal-sheet{background:var(--white);border-radius:24px 24px 0 0;padding:24px 24px 40px;width:100%;max-width:480px;animation:slide .3s cubic-bezier(.32,.72,0,1) both}
.modal-handle{width:40px;height:4px;background:var(--g200);border-radius:2px;margin:0 auto 20px}
.modal-title{font-size:22px;font-weight:900;letter-spacing:-.5px;margin-bottom:6px;text-align:center}
.modal-sub{font-size:14px;color:var(--g400);text-align:center;margin-bottom:20px}
.sos-options{display:flex;flex-direction:column;gap:10px;margin-bottom:16px}
.sos-opt{padding:16px;border-radius:16px;border:2px solid var(--g200);cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:12px}
.sos-opt:active{background:var(--g50)}
.sos-opt-ico{font-size:24px;flex-shrink:0}
.sos-opt-name{font-size:15px;font-weight:700}
.sos-opt-desc{font-size:12px;color:var(--g400);margin-top:2px}

/* â”€â”€ WALLET MODAL â”€â”€ */
#walletModal .modal-sheet{padding-bottom:48px}
.wallet-detail-card{background:var(--black);border-radius:18px;padding:20px;margin-bottom:16px;text-align:center}
.wd-amount{font-size:44px;font-weight:900;color:var(--white);letter-spacing:-2px}
.wd-lbl{font-size:12px;color:rgba(255,255,255,.4);margin-top:6px}
.topup-btns{display:flex;gap:10px;margin-bottom:14px}
.topup-btn{flex:1;height:44px;border-radius:12px;background:var(--g100);border:none;font-family:var(--font);font-size:14px;font-weight:700;cursor:pointer;transition:all .2s}
.topup-btn:active{background:var(--g200)}

/* â”€â”€ TOAST â”€â”€ */
.toast{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-60px);z-index:9999;background:var(--black);color:var(--white);padding:12px 22px;border-radius:50px;font-size:13px;font-weight:700;white-space:nowrap;opacity:0;transition:all .35s cubic-bezier(.34,1.56,.64,1);box-shadow:0 8px 32px rgba(0,0,0,.25)}
.toast.on{opacity:1;transform:translateX(-50%) translateY(0)}
.toast.green{background:var(--green)}
.toast.red{background:var(--red)}
.toast.blue{background:var(--blue)}
</style>
</head>
<body>

<div class="toast" id="toast"></div>

<!-- SOS MODAL -->
<div class="modal-overlay" id="sosModal" onclick="closeSOS(event)">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="modal-title">ğŸ†˜ Urgence SOS</div>
    <div class="modal-sub">Choisissez le type d'urgence</div>
    <div class="sos-options">
      <div class="sos-opt" onclick="sendSOS('police')"><div class="sos-opt-ico">ğŸš”</div><div><div class="sos-opt-name">Police / SÃ©curitÃ©</div><div class="sos-opt-desc">ProblÃ¨me de sÃ©curitÃ© avec le chauffeur</div></div></div>
      <div class="sos-opt" onclick="sendSOS('medical')"><div class="sos-opt-ico">ğŸš‘</div><div><div class="sos-opt-name">Urgence mÃ©dicale</div><div class="sos-opt-desc">Besoin d'assistance mÃ©dicale</div></div></div>
      <div class="sos-opt" onclick="sendSOS('accident')"><div class="sos-opt-ico">ğŸš—</div><div><div class="sos-opt-name">Accident de route</div><div class="sos-opt-desc">Accident ou panne vÃ©hicule</div></div></div>
    </div>
    <button class="btn btn-outline" onclick="document.getElementById('sosModal').classList.remove('on')">Annuler</button>
  </div>
</div>

<!-- WALLET MODAL -->
<div class="modal-overlay" id="walletModal" onclick="closeWallet(event)">
  <div class="modal-sheet">
    <div class="modal-handle"></div>
    <div class="wallet-detail-card">
      <div class="wd-amount" id="walletAmt">15 000</div>
      <div class="wd-lbl">FCFA disponibles</div>
    </div>
    <div class="topup-btns">
      <button class="topup-btn" onclick="topup(1000)">+1 000 F</button>
      <button class="topup-btn" onclick="topup(5000)">+5 000 F</button>
      <button class="topup-btn" onclick="topup(10000)">+10 000 F</button>
    </div>
    <button class="btn btn-black" onclick="toast('Rechargement via Mobile Money','green');closeWallet()">Recharger via Mobile Money</button>
  </div>
</div>

<!-- â•â•â•â• SPLASH â•â•â•â• -->
<div class="sc on" id="splash">
  <div class="sp-logo">ğŸš•</div>
  <div class="sp-name">Yalanamchou</div>
  <div class="sp-tag">N'DjamÃ©na, Tchad ğŸ‡¹ğŸ‡©</div>
  <div class="sp-bar"><div class="sp-fill"></div></div>
</div>

<!-- â•â•â•â• LOGIN â•â•â•â• -->
<div class="sc" id="login">
  <div class="login-top">
    <div class="emoji">ğŸš•</div>
    <div class="login-title">Bienvenue sur Yalanamchou</div>
    <div class="login-sub">Vos courses, votre faÃ§on</div>
  </div>
  <div class="card" id="ls1">
    <div class="card-title">Votre numÃ©ro</div>
    <div class="card-sub">Entrez votre numÃ©ro de tÃ©lÃ©phone</div>
    <div class="ph-row">
      <div class="ph-code">ğŸ‡¹ğŸ‡© +235</div>
      <input class="ph-inp" type="tel" id="ph" placeholder="66 XX XX XX" maxlength="8">
    </div>
    <button class="btn btn-black" onclick="sendOTP()">Continuer â†’</button>
    <div class="terms">En continuant, vous acceptez nos Conditions d'utilisation et Politique de confidentialitÃ©</div>
  </div>
  <div class="card" id="ls2" style="display:none">
    <div class="card-title">Code de vÃ©rification</div>
    <div class="card-sub">Code envoyÃ© au <b id="phDisp"></b></div>
    <div class="otp-grid">
      <input class="otp-b" type="tel" maxlength="1" id="o0" oninput="otpIn(this,0)">
      <input class="otp-b" type="tel" maxlength="1" id="o1" oninput="otpIn(this,1)">
      <input class="otp-b" type="tel" maxlength="1" id="o2" oninput="otpIn(this,2)">
      <input class="otp-b" type="tel" maxlength="1" id="o3" oninput="otpIn(this,3)">
      <input class="otp-b" type="tel" maxlength="1" id="o4" oninput="otpIn(this,4)">
      <input class="otp-b" type="tel" maxlength="1" id="o5" oninput="otpIn(this,5)">
    </div>
    <button class="btn btn-black" onclick="verifyOTP()">VÃ©rifier â†’</button>
    <div class="resend" onclick="sendOTP()">Renvoyer le code</div>
  </div>
</div>

<!-- â•â•â•â• HOME â•â•â•â• -->
<div class="sc" id="home">
  <div class="home-header">
    <div>
      <div class="home-greeting">Bonjour ğŸ‘‹</div>
      <div class="home-name" id="homeName">â€”</div>
    </div>
    <div class="home-header-right">
      <button class="hdr-btn" onclick="goTo('history')">ğŸ“‹</button>
      <button class="hdr-btn" onclick="showNotif()"><span id="notifIco">ğŸ””</span><div class="notif-dot" id="notifDot"></div></button>
    </div>
  </div>
  <div class="where-card" onclick="goTo('booking')">
    <div class="where-icon">ğŸ“</div>
    <div>
      <div class="where-text">OÃ¹ voulez-vous aller ?</div>
      <div class="where-sub">Entrez votre destination</div>
    </div>
    <div style="margin-left:auto;font-size:20px;color:var(--g300)">â€º</div>
  </div>
  <div class="home-scroll">
    <!-- Wallet -->
    <div class="wallet-card">
      <div class="wallet-left">
        <div class="wl-lbl">Mon portefeuille</div>
        <div class="wl-amt" id="walletDisplay">15 000 F</div>
        <div class="wl-sub">Solde disponible</div>
      </div>
      <div class="wallet-right">
        <div class="wallet-badge" onclick="document.getElementById('walletModal').classList.add('on')">+ Recharger</div>
        <div class="wallet-badge" onclick="toast('Historique des transactions','blue')">Transactions</div>
      </div>
    </div>
    <!-- Promo -->
    <div class="promo-banner" onclick="goTo('booking')">
      <div class="promo-ico">ğŸ</div>
      <div>
        <div class="promo-tag">CODE PROMO</div>
        <div class="promo-title">YALA20 â€” 20% de rÃ©duction</div>
        <div class="promo-sub">Valable jusqu'au 31 mars 2026</div>
      </div>
    </div>
    <!-- Quick destinations -->
    <div class="sec-hd"><div class="sec-title">Destinations rapides</div></div>
    <div class="dest-row">
      <div class="dest-chip" onclick="quickDest('AÃ©roport Hassan Djamous')"><div class="dest-chip-ico">âœˆï¸</div><div class="dest-chip-name">AÃ©roport</div></div>
      <div class="dest-chip" onclick="quickDest('UniversitÃ© de N\'DjamÃ©na')"><div class="dest-chip-ico">ğŸ“</div><div class="dest-chip-name">UniversitÃ©</div></div>
      <div class="dest-chip" onclick="quickDest('HÃ´pital GÃ©nÃ©ral')"><div class="dest-chip-ico">ğŸ¥</div><div class="dest-chip-name">HÃ´pital</div></div>
      <div class="dest-chip" onclick="quickDest('Grand MarchÃ©')"><div class="dest-chip-ico">ğŸ›’</div><div class="dest-chip-name">MarchÃ©</div></div>
      <div class="dest-chip" onclick="quickDest('PrÃ©fecture')"><div class="dest-chip-ico">ğŸ›ï¸</div><div class="dest-chip-name">PrÃ©fecture</div></div>
    </div>
    <!-- Recent rides -->
    <div class="sec-hd"><div class="sec-title">Courses rÃ©centes</div><div class="sec-link" onclick="goTo('history')">Voir tout</div></div>
    <div class="ride-item" onclick="quickDest('AÃ©roport Hassan Djamous')">
      <div class="ride-ico">âœˆï¸</div>
      <div><div class="ride-dest">AÃ©roport Hassan Djamous</div><div class="ride-meta">Hier Â· 8.2 km Â· Mahamat</div></div>
      <div class="ride-price">2 750F</div>
    </div>
    <div class="ride-item" onclick="quickDest('UniversitÃ© de N\'DjamÃ©na')">
      <div class="ride-ico">ğŸ“</div>
      <div><div class="ride-dest">UniversitÃ© de N'DjamÃ©na</div><div class="ride-meta">Lun Â· 4.1 km Â· Fatima</div></div>
      <div class="ride-price">1 450F</div>
    </div>
    <div class="ride-item" onclick="quickDest('HÃ´pital GÃ©nÃ©ral')">
      <div class="ride-ico">ğŸ¥</div>
      <div><div class="ride-dest">HÃ´pital GÃ©nÃ©ral</div><div class="ride-meta">Dim Â· 5.2 km Â· Ibrahim</div></div>
      <div class="ride-price">1 800F</div>
    </div>
  </div>
  <div class="bnav">
    <div class="bnav-i on" id="bn1" onclick="bnav('home',this)"><div class="bnav-ico">ğŸ </div><div class="bnav-lbl">Accueil</div></div>
    <div class="bnav-i" id="bn2" onclick="goTo('booking')"><div class="bnav-ico">ğŸš•</div><div class="bnav-lbl">Commander</div></div>
    <div class="bnav-i" id="bn3" onclick="bnav('history',this)"><div class="bnav-ico">ğŸ“‹</div><div class="bnav-lbl">Courses</div></div>
    <div class="bnav-i" id="bn4" onclick="bnav('profile',this)"><div class="bnav-ico">ğŸ‘¤</div><div class="bnav-lbl">Profil</div></div>
  </div>
</div>

<!-- â•â•â•â• BOOKING â•â•â•â• -->
<div class="sc" id="booking">
  <div class="booking-header">
    <button class="back-btn" onclick="goTo('home')">â†</button>
    <div class="route-inputs">
      <div class="route-inp-row">
        <div class="route-pip a"></div>
        <input class="route-inp" id="pickup" placeholder="Votre position" value="MarchÃ© Central" readonly>
      </div>
      <div style="display:flex;gap:0;margin-left:4px"><div class="route-line"></div></div>
      <div class="route-inp-row">
        <div class="route-pip b"></div>
        <input class="route-inp" id="dropoff" placeholder="Destination" id="destInp" oninput="updateEstimate()">
      </div>
    </div>
  </div>
  <div class="price-est">
    <div><div class="pe-label">Estimation</div><div class="pe-price" id="estPrice">â€” FCFA</div></div>
    <div><div class="pe-dist" id="estDist">â€” km</div><div class="pe-dist" id="estTime">â€” min</div></div>
  </div>
  <!-- Promo code -->
  <div class="promo-inp-row">
    <input class="promo-inp" id="promoCode" placeholder="ğŸ Code promo (ex: YALA20)" value="">
    <button class="promo-apply" onclick="applyPromo()">Appliquer</button>
  </div>
  <div class="suggestions" id="suggestions">
    <div class="sug-item" onclick="selectDest('AÃ©roport Hassan Djamous',8.2)"><div class="sug-ico">âœˆï¸</div><div><div class="sug-name">AÃ©roport Hassan Djamous</div><div class="sug-addr">Route de l'AÃ©roport, N'DjamÃ©na</div></div><div class="sug-dist">8.2 km</div></div>
    <div class="sug-item" onclick="selectDest('UniversitÃ© de N\'DjamÃ©na',4.1)"><div class="sug-ico">ğŸ“</div><div><div class="sug-name">UniversitÃ© de N'DjamÃ©na</div><div class="sug-addr">Avenue Charles de Gaulle</div></div><div class="sug-dist">4.1 km</div></div>
    <div class="sug-item" onclick="selectDest('HÃ´pital GÃ©nÃ©ral',5.2)"><div class="sug-ico">ğŸ¥</div><div><div class="sug-name">HÃ´pital GÃ©nÃ©ral</div><div class="sug-addr">Boulevard du 1er AoÃ»t</div></div><div class="sug-dist">5.2 km</div></div>
    <div class="sug-item" onclick="selectDest('Grand MarchÃ©',2.1)"><div class="sug-ico">ğŸ›’</div><div><div class="sug-name">Grand MarchÃ©</div><div class="sug-addr">Centre-ville, N'DjamÃ©na</div></div><div class="sug-dist">2.1 km</div></div>
    <div class="sug-item" onclick="selectDest('PrÃ©fecture',3.8)"><div class="sug-ico">ğŸ›ï¸</div><div><div class="sug-name">PrÃ©fecture</div><div class="sug-addr">Avenue de France</div></div><div class="sug-dist">3.8 km</div></div>
    <div class="sug-item" onclick="selectDest('Quartier Moursal',6.5)"><div class="sug-ico">ğŸ˜ï¸</div><div><div class="sug-name">Quartier Moursal</div><div class="sug-addr">N'DjamÃ©na Est</div></div><div class="sug-dist">6.5 km</div></div>
    <div class="sug-item" onclick="selectDest('Palais PrÃ©sidentiel',4.8)"><div class="sug-ico">ğŸ°</div><div><div class="sug-name">Palais PrÃ©sidentiel</div><div class="sug-addr">Avenue Mobutu</div></div><div class="sug-dist">4.8 km</div></div>
  </div>
</div>

<!-- â•â•â•â• VEHICLES â•â•â•â• -->
<div class="sc" id="vehicles">
  <div class="map-preview">
    <canvas id="mapPrev"></canvas>
    <div class="map-overlay-dest">
      <span style="font-size:16px">ğŸ“</span>
      <div class="mod-dest" id="vehDest">Destination</div>
      <div class="mod-dist" id="vehDist">â€” km</div>
    </div>
  </div>
  <div class="vehicles-list">
    <div class="vehicle-card on" id="v0" onclick="selectVeh(0)">
      <div class="vc-ico">ğŸ›µ</div>
      <div>
        <div class="vc-name">Moto Express</div>
        <div class="vc-desc">Rapide Â· 1 personne</div>
        <div class="vc-eta" id="veta0">â± 3 min</div>
      </div>
      <div class="vc-price" id="vp0">500 F</div>
    </div>
    <div class="vehicle-card" id="v1" onclick="selectVeh(1)">
      <div class="vc-ico">ğŸš•</div>
      <div>
        <div class="vc-name">Yala Taxi</div>
        <div class="vc-desc">Confort Â· 1-4 personnes</div>
        <div class="vc-eta" id="veta1">â± 5 min</div>
      </div>
      <div class="vc-price" id="vp1">1 200 F</div>
    </div>
    <div class="vehicle-card" id="v2" onclick="selectVeh(2)">
      <div class="vc-ico">ğŸš</div>
      <div>
        <div class="vc-name">Yala Premium</div>
        <div class="vc-desc">Luxe Â· 1-6 personnes</div>
        <div class="vc-eta" id="veta2">â± 8 min</div>
      </div>
      <div class="vc-price" id="vp2">2 500 F</div>
    </div>
  </div>
  <div class="veh-bottom">
    <div class="veh-confirm-row">
      <div><div class="veh-total-lbl">Total estimÃ©</div><div class="veh-total" id="vehTotal">500 F</div></div>
      <div style="text-align:right"><div class="veh-total-lbl">Portefeuille</div><div style="font-size:14px;font-weight:700;color:var(--green)" id="walletBal">15 000 F</div></div>
    </div>
    <button class="btn btn-black" onclick="confirmRide()">Confirmer la course â†’</button>
  </div>
</div>

<!-- â•â•â•â• TRACKING â•â•â•â• -->
<div class="sc" id="tracking">
  <div class="track-map">
    <canvas id="trackMap"></canvas>
  </div>
  <div class="track-sheet">
    <div class="status-badge"><div class="status-pip"></div><div class="status-txt" id="trackStatus">Chauffeur en route</div></div>
    <div class="track-title" id="trackTitle">Mahamat arrive dans 5 min</div>
    <div class="track-sub" id="trackSub">â†’ AÃ©roport Hassan Djamous</div>
    <div class="eta-row">
      <div class="eta-box"><div class="eta-val" id="etaMin">5</div><div class="eta-lbl">minutes</div></div>
      <div class="eta-box"><div class="eta-val" id="etaKm">8.2</div><div class="eta-lbl">km</div></div>
      <div class="eta-box"><div class="eta-val" id="etaPrice">2 750</div><div class="eta-lbl">FCFA</div></div>
    </div>
    <div class="prog-track"><div class="prog-fill" id="trackProg"></div></div>
    <div class="driver-card">
      <div class="drv-ava">ğŸ‘¨ğŸ¿</div>
      <div>
        <div class="drv-name" id="drvName">Mahamat Ibrahim</div>
        <div class="drv-car" id="drvCar">Toyota Corolla Â· Gris</div>
        <div class="drv-rating">â­ 4.9 Â· 156 courses</div>
      </div>
      <div class="drv-plate" id="drvPlate">TD-2847-A</div>
    </div>
    <div class="action-row">
      <button class="act-btn outline" onclick="goTo('chat')">ğŸ’¬ Chat</button>
      <button class="act-btn black" onclick="callDriver()">ğŸ“ Appeler</button>
      <button class="act-btn outline" onclick="toast('Course annulÃ©e','red');goTo('home')">âœ• Annuler</button>
    </div>
    <button class="sos-btn" onclick="document.getElementById('sosModal').classList.add('on')">ğŸ†˜ URGENCE SOS â€” Appuyer en cas de danger</button>
  </div>
</div>

<!-- â•â•â•â• CHAT â•â•â•â• -->
<div class="sc" id="chat">
  <div class="chat-header">
    <button class="back-btn" onclick="goTo('tracking')">â†</button>
    <div class="drv-ava" style="width:40px;height:40px;font-size:18px;flex-shrink:0">ğŸ‘¨ğŸ¿</div>
    <div class="chat-drv-info">
      <div class="chat-drv-name" id="chatDrvName">Mahamat Ibrahim</div>
      <div class="chat-drv-status">â— En route vers vous</div>
    </div>
    <button class="act-btn black" style="width:auto;padding:0 16px;height:36px;font-size:13px" onclick="callDriver()">ğŸ“</button>
  </div>
  <div class="chat-messages" id="chatMsgs">
    <div class="msg them">Bonjour ! Je suis en route, j'arrive dans 5 minutes ğŸš•<div class="msg-time">14:32</div></div>
    <div class="msg them">Je suis au carrefour du marchÃ© central<div class="msg-time">14:33</div></div>
  </div>
  <div class="quick-replies">
    <button class="qr" onclick="sendMsg('OK, je vous attends ğŸ‘')">ğŸ‘ J'attends</button>
    <button class="qr" onclick="sendMsg('Je suis devant l\'entrÃ©e principale')">ğŸ“ EntrÃ©e principale</button>
    <button class="qr" onclick="sendMsg('Merci !')">ğŸ™ Merci</button>
    <button class="qr" onclick="sendMsg('Pouvez-vous me rappeler ?')">ğŸ“ Rappeler</button>
    <button class="qr" onclick="sendMsg('Combien de temps encore ?')">â± ETA ?</button>
  </div>
  <div class="chat-input-row">
    <input class="chat-inp" id="chatInp" placeholder="Ã‰crire un message..." onkeydown="if(event.key==='Enter')sendMsg()">
    <button class="chat-send" onclick="sendMsg()">â†‘</button>
  </div>
</div>

<!-- â•â•â•â• ARRIVED â•â•â•â• -->
<div class="sc" id="arrived">
  <div class="arr-emoji">ğŸ‰</div>
  <div class="arr-title">Vous Ãªtes arrivÃ© !</div>
  <div class="arr-sub" id="arrSub">Course avec Mahamat Ibrahim</div>
  <div class="price-card">
    <div class="price-big" id="arrPrice">2 750</div>
    <div class="price-lbl">FCFA</div>
    <div class="breakdown">
      <div class="bd-item"><div class="bd-val" id="bdDist">8.2 km</div><div class="bd-lbl">Distance</div></div>
      <div class="bd-item"><div class="bd-val" id="bdTime">24 min</div><div class="bd-lbl">DurÃ©e</div></div>
      <div class="bd-item"><div class="bd-val" id="bdType">ğŸš• Taxi</div><div class="bd-lbl">VÃ©hicule</div></div>
    </div>
  </div>
  <div class="rating-row" id="ratingRow">
    <span class="star" onclick="rate(1)">â­</span>
    <span class="star" onclick="rate(2)">â­</span>
    <span class="star" onclick="rate(3)">â­</span>
    <span class="star on" onclick="rate(4)">â­</span>
    <span class="star on" onclick="rate(5)">â­</span>
  </div>
  <div class="pay-methods" id="payMethods">
    <button class="pay-btn on" onclick="selectPay(this,'EspÃ¨ces')">ğŸ’µ EspÃ¨ces</button>
    <button class="pay-btn" onclick="selectPay(this,'Airtel')">ğŸ“± Airtel</button>
    <button class="pay-btn" onclick="selectPay(this,'Moov')">ğŸ’³ Moov</button>
  </div>
  <button class="btn btn-black" onclick="finishRide()" style="width:100%">Terminer la course â†’</button>
</div>

<!-- â•â•â•â• HISTORY â•â•â•â• -->
<div class="sc" id="history">
  <div class="hist-header">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:14px">
      <button class="back-btn" onclick="goTo('home')">â†</button>
      <div class="hist-title" style="margin-bottom:0">Mes courses</div>
    </div>
    <div class="hist-stats">
      <div class="hist-stat"><div class="hist-stat-val">24</div><div class="hist-stat-lbl">Total</div></div>
      <div class="hist-stat"><div class="hist-stat-val" style="color:var(--green)">42 500F</div><div class="hist-stat-lbl">DÃ©penses</div></div>
      <div class="hist-stat"><div class="hist-stat-val">â­ 4.8</div><div class="hist-stat-lbl">Ma note</div></div>
    </div>
  </div>
  <div class="hist-list">
    <div class="hist-item"><div class="hist-ico">âœˆï¸</div><div><div class="hist-dest">AÃ©roport Hassan Djamous</div><div class="hist-meta">27/02 Â· 8.2 km Â· Mahamat</div></div><div class="hist-right"><div class="hist-price">2 750F</div><div class="hist-status ok">âœ“ TerminÃ©e</div></div></div>
    <div class="hist-item"><div class="hist-ico">ğŸ“</div><div><div class="hist-dest">UniversitÃ© de N'DjamÃ©na</div><div class="hist-meta">26/02 Â· 4.1 km Â· Fatima</div></div><div class="hist-right"><div class="hist-price">1 450F</div><div class="hist-status ok">âœ“ TerminÃ©e</div></div></div>
    <div class="hist-item"><div class="hist-ico">ğŸ¥</div><div><div class="hist-dest">HÃ´pital GÃ©nÃ©ral</div><div class="hist-meta">25/02 Â· 5.2 km Â· Ibrahim</div></div><div class="hist-right"><div class="hist-price">1 800F</div><div class="hist-status ok">âœ“ TerminÃ©e</div></div></div>
    <div class="hist-item"><div class="hist-ico">ğŸ›’</div><div><div class="hist-dest">Grand MarchÃ©</div><div class="hist-meta">24/02 Â· 2.1 km Â· Ali</div></div><div class="hist-right"><div class="hist-price">950F</div><div class="hist-status ko">âœ• AnnulÃ©e</div></div></div>
    <div class="hist-item"><div class="hist-ico">ğŸ›ï¸</div><div><div class="hist-dest">PrÃ©fecture</div><div class="hist-meta">23/02 Â· 3.8 km Â· Mahamat</div></div><div class="hist-right"><div class="hist-price">1 350F</div><div class="hist-status ok">âœ“ TerminÃ©e</div></div></div>
    <div class="hist-item"><div class="hist-ico">ğŸ˜ï¸</div><div><div class="hist-dest">Quartier Moursal</div><div class="hist-meta">22/02 Â· 6.5 km Â· Ibrahim</div></div><div class="hist-right"><div class="hist-price">2 200F</div><div class="hist-status ok">âœ“ TerminÃ©e</div></div></div>
  </div>
</div>

<!-- â•â•â•â• PROFILE â•â•â•â• -->
<div class="sc" id="profile">
  <div class="prof-header">
    <div class="prof-ava" id="profAva">ğŸ‘¤</div>
    <div class="prof-name" id="profName">â€”</div>
    <div class="prof-phone" id="profPhone">â€”</div>
    <div class="prof-verify"><span>âœ“</span><span class="prof-verify-txt">Compte vÃ©rifiÃ©</span></div>
  </div>
  <div class="prof-stats">
    <div class="ps-item"><div class="ps-val">24</div><div class="ps-lbl">Courses</div></div>
    <div class="ps-item"><div class="ps-val" style="color:var(--green)">15 000F</div><div class="ps-lbl">Solde</div></div>
    <div class="ps-item"><div class="ps-val">â­ 4.8</div><div class="ps-lbl">Ma note</div></div>
  </div>
  <div class="menu-section">
    <div class="menu-lbl">Mon compte</div>
    <div class="menu-item" onclick="document.getElementById('walletModal').classList.add('on')"><div class="mi-ico">ğŸ’°</div><div class="mi-txt">Mon portefeuille</div><div style="font-size:13px;font-weight:800;color:var(--green)">15 000F</div><div class="mi-chev">â€º</div></div>
    <div class="menu-item" onclick="goTo('history')"><div class="mi-ico">ğŸ“‹</div><div class="mi-txt">Historique des courses</div><div class="mi-chev">â€º</div></div>
    <div class="menu-item" onclick="toast('Codes promo','blue')"><div class="mi-ico">ğŸ</div><div class="mi-txt">Codes promo</div><div class="mi-badge">YALA20</div><div class="mi-chev">â€º</div></div>
    <div class="menu-item" onclick="toast('Notifications','blue')"><div class="mi-ico">ğŸ””</div><div class="mi-txt">Notifications</div><div class="mi-chev">â€º</div></div>
  </div>
  <div class="menu-section">
    <div class="menu-lbl">SÃ©curitÃ©</div>
    <div class="menu-item" onclick="toast('Contacts d\'urgence mis Ã  jour','green')"><div class="mi-ico">ğŸ†˜</div><div class="mi-txt">Contacts d'urgence</div><div class="mi-chev">â€º</div></div>
    <div class="menu-item" onclick="toast('Support contactÃ©','green')"><div class="mi-ico">ğŸ’¬</div><div class="mi-txt">Support client</div><div class="mi-chev">â€º</div></div>
  </div>
  <div class="menu-section">
    <div class="menu-item danger" onclick="logout()"><div class="mi-ico">ğŸšª</div><div class="mi-txt">Se dÃ©connecter</div></div>
  </div>
  <div style="height:80px"></div>
  <div class="bnav">
    <div class="bnav-i" onclick="goTo('home')"><div class="bnav-ico">ğŸ </div><div class="bnav-lbl">Accueil</div></div>
    <div class="bnav-i" onclick="goTo('booking')"><div class="bnav-ico">ğŸš•</div><div class="bnav-lbl">Commander</div></div>
    <div class="bnav-i" onclick="goTo('history')"><div class="bnav-ico">ğŸ“‹</div><div class="bnav-lbl">Courses</div></div>
    <div class="bnav-i on"><div class="bnav-ico">ğŸ‘¤</div><div class="bnav-lbl">Profil</div></div>
  </div>
</div>

<script>
const API='http://localhost:5000/api';
let user=null,wallet=15000,selectedVeh=0,selectedDest='',selectedDist=0,promoApplied=false;
let trackInterval=null,progVal=0;
const DRIVERS=[
  {name:'Mahamat Ibrahim',car:'Toyota Corolla Â· Gris',rating:'4.9',rides:156,plate:'TD-2847-A',ava:'ğŸ‘¨ğŸ¿'},
  {name:'Fatima Oumar',car:'Nissan Sunny Â· Blanc',rating:'4.8',rides:98,plate:'TD-1234-B',ava:'ğŸ‘©ğŸ¿'},
  {name:'Ibrahim Hassan',car:'Peugeot 504 Â· Bleu',rating:'4.7',rides:74,plate:'TD-5678-C',ava:'ğŸ‘¨ğŸ¿â€ğŸ¦±'},
];
const VEHICLES=[
  {name:'Moto Express',ico:'ğŸ›µ',base:200,pkm:100},
  {name:'Yala Taxi',ico:'ğŸš•',base:500,pkm:180},
  {name:'Yala Premium',ico:'ğŸš',base:1000,pkm:280},
];

// â”€â”€ SCREENS â”€â”€
function goTo(id){
  document.querySelectorAll('.sc').forEach(s=>s.classList.remove('on'));
  document.getElementById(id).classList.add('on');
  if(id==='vehicles') startMapPrev();
  if(id==='tracking') startTrackMap();
}
function bnav(id,el){
  document.querySelectorAll('.bnav-i').forEach(b=>b.classList.remove('on'));
  el.classList.add('on');
  goTo(id);
}

// â”€â”€ SPLASH â”€â”€
setTimeout(()=>{
  const u=localStorage.getItem('yala_user');
  if(u){user=JSON.parse(u);applyUser();goTo('home');}
  else goTo('login');
},3000);

// â”€â”€ AUTH â”€â”€
let savedPhone='',savedOTP='';
async function sendOTP(){
  const p=document.getElementById('ph').value.trim();
  if(p.length<8){toast('NumÃ©ro invalide','red');return;}
  savedPhone='+235'+p;
  try{
    const r=await fetch(API+'/auth/send-otp',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone:savedPhone})});
    const d=await r.json();
    savedOTP=d.debug_otp||'';
    document.getElementById('phDisp').textContent=savedPhone;
    if(savedOTP) savedOTP.split('').forEach((c,i)=>{const b=document.getElementById('o'+i);if(b){b.value=c;b.classList.add('ok');}});
    document.getElementById('ls1').style.display='none';
    document.getElementById('ls2').style.display='block';
    toast('Code envoyÃ© !','green');
  }catch(e){
    // Demo mode
    savedOTP='123456';
    document.getElementById('phDisp').textContent=savedPhone;
    savedOTP.split('').forEach((c,i)=>{const b=document.getElementById('o'+i);if(b){b.value=c;b.classList.add('ok');}});
    document.getElementById('ls1').style.display='none';
    document.getElementById('ls2').style.display='block';
    toast('Mode dÃ©mo â€” code: 123456');
  }
}
function otpIn(el,i){if(el.value){el.classList.add('ok');if(i<5)document.getElementById('o'+(i+1)).focus();}else el.classList.remove('ok');}
async function verifyOTP(){
  const otp=[0,1,2,3,4,5].map(i=>document.getElementById('o'+i).value).join('');
  if(otp.length<6){toast('Code incomplet','red');return;}
  try{
    const r=await fetch(API+'/auth/verify-otp',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone:savedPhone,otp,name:'Utilisateur'})});
    const d=await r.json();
    if(r.ok){user=d.user;localStorage.setItem('yala_user',JSON.stringify(user));applyUser();toast('Bienvenue !','green');goTo('home');}
    else toast('Code incorrect','red');
  }catch(e){
    user={name:'Issa Mahamat',phone:savedPhone,id:1};
    localStorage.setItem('yala_user',JSON.stringify(user));
    applyUser();toast('Bienvenue !','green');goTo('home');
  }
}
function applyUser(){
  if(!user)return;
  const n=user.name||'Utilisateur';
  document.getElementById('homeName').textContent=n;
  document.getElementById('profName').textContent=n;
  document.getElementById('profPhone').textContent=user.phone||'';
  document.getElementById('profAva').textContent=n[0]||'ğŸ‘¤';
}
function logout(){localStorage.removeItem('yala_user');user=null;goTo('login');}

// â”€â”€ BOOKING â”€â”€
function quickDest(dest){
  document.getElementById('dropoff').value=dest;
  const km=({
    'AÃ©roport Hassan Djamous':8.2,'UniversitÃ© de N\'DjamÃ©na':4.1,
    'HÃ´pital GÃ©nÃ©ral':5.2,'Grand MarchÃ©':2.1,'PrÃ©fecture':3.8,
    'Quartier Moursal':6.5,'Palais PrÃ©sidentiel':4.8
  }[dest])||5;
  selectDest(dest,km);
}
function selectDest(dest,km){
  selectedDest=dest; selectedDist=km;
  document.getElementById('dropoff').value=dest;
  // Estimate
  const base=VEHICLES[1].base,pkm=VEHICLES[1].pkm;
  const price=Math.round((base+pkm*km)/50)*50;
  document.getElementById('estPrice').textContent=price.toLocaleString()+' FCFA';
  document.getElementById('estDist').textContent=km+' km';
  document.getElementById('estTime').textContent=Math.round(km*3)+' min estimÃ©';
  // Update vehicle prices
  VEHICLES.forEach((v,i)=>{
    const p=Math.round((v.base+v.pkm*km)/50)*50;
    document.getElementById('vp'+i).textContent=p.toLocaleString()+' F';
    document.getElementById('veta'+i).textContent='â± '+(i*2+3)+' min';
  });
  document.getElementById('vehDest').textContent=dest;
  document.getElementById('vehDist').textContent=km+' km';
  goTo('vehicles');
}
function updateEstimate(){
  const val=document.getElementById('dropoff').value;
  if(val.length>2){
    const km=(3+Math.random()*7).toFixed(1);
    const price=Math.round((500+180*km)/50)*50;
    document.getElementById('estPrice').textContent=parseInt(price).toLocaleString()+' FCFA';
    document.getElementById('estDist').textContent=km+' km';
  }
}
function applyPromo(){
  const code=document.getElementById('promoCode').value.trim().toUpperCase();
  if(code==='YALA20'){
    promoApplied=true;
    toast('ğŸ Code YALA20 appliquÃ© ! -20%','green');
  } else if(code===''){
    toast('Entrez un code promo','red');
  } else {
    toast('Code invalide','red');
  }
}

// â”€â”€ VEHICLES â”€â”€
function selectVeh(i){
  selectedVeh=i;
  document.querySelectorAll('.vehicle-card').forEach((c,j)=>{
    c.classList.toggle('on',j===i);
  });
  const km=selectedDist||5;
  const v=VEHICLES[i];
  let price=Math.round((v.base+v.pkm*km)/50)*50;
  if(promoApplied) price=Math.round(price*0.8);
  document.getElementById('vehTotal').textContent=price.toLocaleString()+' F';
}
function confirmRide(){
  const drv=DRIVERS[Math.floor(Math.random()*DRIVERS.length)];
  const km=selectedDist||5;
  const v=VEHICLES[selectedVeh];
  let price=Math.round((v.base+v.pkm*km)/50)*50;
  if(promoApplied) price=Math.round(price*0.8);
  // Fill tracking screen
  document.getElementById('trackTitle').textContent=drv.name+' arrive dans '+(selectedVeh*2+3)+' min';
  document.getElementById('trackSub').textContent='â†’ '+(selectedDest||'Destination');
  document.getElementById('drvName').textContent=drv.name;
  document.getElementById('drvCar').textContent=drv.car;
  document.getElementById('drvPlate').textContent=drv.plate;
  document.getElementById('etaMin').textContent=(selectedVeh*2+3);
  document.getElementById('etaKm').textContent=km;
  document.getElementById('etaPrice').textContent=price.toLocaleString();
  document.getElementById('chatDrvName').textContent=drv.name;
  // Arrived screen
  document.getElementById('arrPrice').textContent=price.toLocaleString();
  document.getElementById('arrSub').textContent='Course avec '+drv.name;
  document.getElementById('bdDist').textContent=km+' km';
  document.getElementById('bdTime').textContent=Math.round(km*3)+' min';
  document.getElementById('bdType').textContent=v.ico+' '+v.name;
  goTo('tracking');
  startTracking(price);
  toast('Course confirmÃ©e ! ğŸš•','green');
}

// â”€â”€ TRACKING â”€â”€
function startTracking(price){
  clearInterval(trackInterval);
  progVal=0;
  document.getElementById('trackProg').style.width='0%';
  const phases=[
    {pct:30,status:'Chauffeur en route',title:'Arrive dans 4 min'},
    {pct:60,status:'Passager Ã  bord',title:'En route vers la destination'},
    {pct:90,status:'Approche de la destination',title:'ArrivÃ©e dans 2 min'},
    {pct:100,status:'ArrivÃ© !',title:'Vous Ãªtes arrivÃ© !'},
  ];
  let phase=0;
  trackInterval=setInterval(()=>{
    progVal+=1;
    document.getElementById('trackProg').style.width=progVal+'%';
    const min=Math.max(0,Math.round((100-progVal)/20));
    document.getElementById('etaMin').textContent=min;
    if(phase<phases.length && progVal>=phases[phase].pct){
      document.getElementById('trackStatus').textContent=phases[phase].status;
      document.getElementById('trackTitle').textContent=phases[phase].title;
      phase++;
    }
    if(progVal>=100){
      clearInterval(trackInterval);
      setTimeout(()=>goTo('arrived'),800);
    }
  },300);
}
function callDriver(){toast('ğŸ“ Appel en cours...','blue');}

// â”€â”€ CHAT â”€â”€
function sendMsg(txt){
  const inp=document.getElementById('chatInp');
  const msg=txt||inp.value.trim();
  if(!msg)return;
  const msgs=document.getElementById('chatMsgs');
  const now=new Date().toLocaleTimeString('fr',{hour:'2-digit',minute:'2-digit'});
  msgs.innerHTML+=`<div class="msg me">${msg}<div class="msg-time">${now}</div></div>`;
  inp.value='';
  msgs.scrollTop=msgs.scrollHeight;
  // Auto reply
  setTimeout(()=>{
    const replies=['D\'accord !','Je suis lÃ  dans 2 minutes ğŸš•','OK, pas de problÃ¨me','Je vous vois !'];
    const r=replies[Math.floor(Math.random()*replies.length)];
    msgs.innerHTML+=`<div class="msg them">${r}<div class="msg-time">${new Date().toLocaleTimeString('fr',{hour:'2-digit',minute:'2-digit'})}</div></div>`;
    msgs.scrollTop=msgs.scrollHeight;
  },1500);
}

// â”€â”€ ARRIVED â”€â”€
let curRating=4;
function rate(n){
  curRating=n;
  document.querySelectorAll('.star').forEach((s,i)=>s.classList.toggle('on',i<n));
}
function selectPay(el,method){
  document.querySelectorAll('.pay-btn').forEach(b=>b.classList.remove('on'));
  el.classList.add('on');
}
function finishRide(){
  toast('Merci ! Course Ã©valuÃ©e â­'+curRating,'green');
  setTimeout(()=>goTo('home'),1200);
}

// â”€â”€ SOS â”€â”€
function sendSOS(type){
  const msgs={police:'ğŸš” Police contactÃ©e ! Restez calme.',medical:'ğŸš‘ Secours mÃ©dicaux alertÃ©s !',accident:'ğŸš— Assistance routiÃ¨re contactÃ©e !'};
  document.getElementById('sosModal').classList.remove('on');
  toast(msgs[type]||'SOS envoyÃ© !','red');
}
function closeSOS(e){if(e.target.id==='sosModal')document.getElementById('sosModal').classList.remove('on');}

// â”€â”€ WALLET â”€â”€
function topup(amount){
  wallet+=amount;
  document.getElementById('walletAmt').textContent=wallet.toLocaleString();
  document.getElementById('walletDisplay').textContent=wallet.toLocaleString()+' F';
  document.getElementById('walletBal').textContent=wallet.toLocaleString()+' F';
  toast('+'+amount.toLocaleString()+' FCFA ajoutÃ©s !','green');
}
function closeWallet(e){if(!e||e.target.id==='walletModal')document.getElementById('walletModal').classList.remove('on');}

// â”€â”€ NOTIFICATIONS â”€â”€
function showNotif(){toast('Aucune nouvelle notification');}

// â”€â”€ MAPS â”€â”€
let mapPrevAnim=null;
function startMapPrev(){
  const c=document.getElementById('mapPrev');
  if(!c)return;
  function draw(){
    c.width=c.offsetWidth;c.height=220;
    const W=c.width,H=220,ctx=c.getContext('2d');
    drawBaseMap(ctx,W,H);
    requestAnimationFrame(draw);
  }
  draw();
}

const tPos=[{x:.35,y:.38},{x:.68,y:.55},{x:.25,y:.68},{x:.75,y:.28}];
const tVel=tPos.map(()=>({dx:(Math.random()-.5)*.0018,dy:(Math.random()-.5)*.0018}));

function startTrackMap(){
  const c=document.getElementById('trackMap');
  if(!c)return;
  function draw(){
    c.width=c.offsetWidth;c.height=c.offsetHeight||window.innerHeight*.42;
    const W=c.width,H=c.height,ctx=c.getContext('2d');
    drawBaseMap(ctx,W,H,true);
    tPos.forEach((d,i)=>{
      d.x+=tVel[i].dx;d.y+=tVel[i].dy;
      if(d.x<.05||d.x>.92)tVel[i].dx*=-1;
      if(d.y<.06||d.y>.88)tVel[i].dy*=-1;
      ctx.font='14px serif';ctx.textAlign='center';ctx.fillText('ğŸš•',d.x*W,d.y*H+4);
    });
    // Route line
    const pulse=.5+.5*Math.sin(Date.now()*.004);
    ctx.beginPath();ctx.moveTo(W*.5,H*.5);ctx.lineTo(W*.75,H*.3);
    ctx.strokeStyle=`rgba(232,41,74,${.5+pulse*.3})`;ctx.lineWidth=2;ctx.setLineDash([6,4]);ctx.stroke();ctx.setLineDash([]);
    // User dot
    ctx.beginPath();ctx.arc(W*.5,H*.5,16+pulse*5,0,Math.PI*2);ctx.fillStyle='rgba(37,99,235,.12)';ctx.fill();
    ctx.beginPath();ctx.arc(W*.5,H*.5,9,0,Math.PI*2);ctx.fillStyle='white';ctx.fill();
    ctx.beginPath();ctx.arc(W*.5,H*.5,6,0,Math.PI*2);ctx.fillStyle='#2563EB';ctx.fill();
    if(document.getElementById('tracking').classList.contains('on')) requestAnimationFrame(draw);
  }
  draw();
}

function drawBaseMap(ctx,W,H,animated){
  const bg=ctx.createLinearGradient(0,0,W,H);
  bg.addColorStop(0,'#0a0f1e');bg.addColorStop(1,'#050810');
  ctx.fillStyle=bg;ctx.fillRect(0,0,W,H);
  ctx.strokeStyle='rgba(255,255,255,.025)';ctx.lineWidth=1;
  for(let i=0;i<20;i++){ctx.beginPath();ctx.moveTo(i*W/20,0);ctx.lineTo(i*W/20,H);ctx.stroke();ctx.beginPath();ctx.moveTo(0,i*H/20);ctx.lineTo(W,i*H/20);ctx.stroke();}
  ctx.beginPath();ctx.moveTo(0,H*.62);ctx.bezierCurveTo(W*.3,H*.52,W*.6,H*.64,W,H*.5);
  ctx.strokeStyle='rgba(30,100,220,.2)';ctx.lineWidth=20;ctx.stroke();
  [[0,.5,1,.5,7],[.5,0,.5,1,7],[0,.28,1,.28,4],[.28,0,.28,1,4],[.72,0,.72,1,4],[0,.72,1,.72,4]].forEach(([x1,y1,x2,y2,w])=>{
    ctx.beginPath();ctx.moveTo(x1*W,y1*H);ctx.lineTo(x2*W,y2*H);
    ctx.strokeStyle='rgba(255,255,255,.08)';ctx.lineWidth=w;ctx.stroke();
  });
}

// â”€â”€ TOAST â”€â”€
function toast(msg,type=''){
  const el=document.getElementById('toast');
  el.textContent=msg;el.className='toast on'+(type?' '+type:'');
  setTimeout(()=>el.classList.remove('on'),3200);
}
</script>
</body>
</html>